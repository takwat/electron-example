<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Example</title>
<link rel="stylesheet" href="./assets/css/bootstrap.min.css">
</head>
<body>
<div class="container">
	<button id="fileSelect" type="button" class="btn btn-primary btn-lg btn-block">ファイル選択</button>
	<button id="folderSelect" type="button" class="btn btn-default btn-lg btn-block">フォルダ選択</button>
</div>

<div class="container">
	<table class="table">
		<thead>
		</thead>
	</table>

	<button id="fileSelect" type="button" class="btn btn-primary btn-lg btn-block">ファイル選択</button>
	<button id="folderSelect" type="button" class="btn btn-default btn-lg btn-block">フォルダ選択</button>
</div>



<script>
window.jQuery = window.$ = require('./assets/js/jquery-2.1.4.min.js');
</script>

<script src="./assets/js/bootstrap.min.js"></script>
<script src="./assets/js/knockout-3.3.0.js"></script>

<script>
var remote = require('remote');
var dialog = remote.require('dialog');
var browserWindow = remote.require('browser-window');

//	選択されたファイルをいじりたい場合はnode.jsのfsが使える
var fs = require('fs');

$(function(){
	var ViewModel = (function(){





		this.Entry = function(file){
			return {
				original: file,
				renameTo: '',
			}
		};

	})();
	ko.applyBindings(ViewModel);

	$('#fileSelect').on('click', function(){
		var focusedWindow = browserWindow.getFocusedWindow();
		dialog.showOpenDialog(focusedWindow, {
			properties: ['openFile'],
			filters: [{
				name: 'テキストファイル',
				extensions: ['txt']				
			}]
		}, function(files){
			(files || []).forEach(function(file){
				console.log(file);
			});
		});
	});
	$('#folderSelect').on('click', function(){
		var focusedWindow = browserWindow.getFocusedWindow();
		dialog.showOpenDialog(focusedWindow, {
			properties: ['openDirectory']
		}, function(directories){
			(directories || []).forEach(function(directory){
				fs.readdir(directory, function(err, files){
					console.log(files);
				});
//				console.log(directory);
			});
		});
	});
});
</script>
</body>
</html>
